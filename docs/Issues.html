<!DOCTYPE html>
<html lang="en">
<head>
  
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    
    <link rel="shortcut icon" href="./img/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>Troubleshooting - Distribution Builder</title>
    <link href="./css/bootstrap-3.3.7.min.css" rel="stylesheet">
    <link href="./css/font-awesome-4.7.0.css" rel="stylesheet">
    <link href="./css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="./css/highlight.css">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <script src="./js/jquery-3.2.1.min.js"></script>
    <script src="./js/bootstrap-3.3.7.min.js"></script>
    <script src="./js/highlight.pack.js"></script>
    
    <base target="_top">
    <script>
      var base_url = '.';
      var is_top_frame = false;
        
        var pageToc = [
          {title: "Troubleshooting", url: "#_top", children: [
              {title: "Tested Against", url: "#tested-against" },
              {title: "Binary launching runtime issues", url: "#binary-launching-runtime-issues" },
              {title: "Qt Installer Framework issues", url: "#qt-installer-framework-issues" },
              {title: "Get Help", url: "#get-help" },
          ]},
        ];

    </script>
    <script src="./js/base.js"></script> 
</head>

<body>
<script>
if (is_top_frame) { $('body').addClass('wm-top-page'); }
</script>



<div class="container-fluid wm-page-content">
  <a name="_top"></a>
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="ToDo.html" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="ToDo.html" class="btn btn-xs btn-link">
        To-Do List
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="Utility%20Constants.html" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="Utility%20Constants.html" class="btn btn-xs btn-link">
        Utility Constants
      </a>
    </div>
    
  </div>

    

    <h1 id="troubleshooting">Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permanent link">&para;</a></h1>
<p><img alt="distbuilder logo" src="https://raw.githubusercontent.com/BuvinJT/distbuilder/master/docs/img/distbuilder128.png" /></p>
<h2 id="tested-against">Tested Against<a class="headerlink" href="#tested-against" title="Permanent link">&para;</a></h2>
<p>Python:  </p>
<ul>
<li>2.7  </li>
<li>3.5  </li>
<li>3.7  </li>
<li>3.8</li>
</ul>
<p>Windows:    </p>
<ul>
<li>7</li>
<li>8.0  </li>
<li>10</li>
</ul>
<p>macOS:    </p>
<ul>
<li>Sierra  </li>
<li>Mojave</li>
</ul>
<p>Linux:   </p>
<ul>
<li>Ubuntu 16.04  </li>
<li>Ubuntu 18.04  </li>
<li>CentOS 7.6 (minimal)</li>
</ul>
<p>OS Language:  </p>
<ul>
<li>English  </li>
</ul>
<p>PyInstaller:  </p>
<ul>
<li>2.1</li>
<li>3.4</li>
<li>4.0</li>
<li>Binary / Script</li>
</ul>
<p>Qt Installer Framework:  </p>
<ul>
<li>2.0.5</li>
<li>3.0.6</li>
<li>3.1.1</li>
<li>3.2.2        </li>
</ul>
<p>Pip:  </p>
<ul>
<li>8.x  </li>
<li>18.x  </li>
<li>19.x  </li>
<li>20.x</li>
</ul>
<p>Opy distbuilder:  </p>
<ul>
<li>0.9+  </li>
</ul>
<p>Qt C++ Integration:</p>
<ul>
<li>Qt 5.8</li>
<li>Qt 5.14</li>
<li>MSVC</li>
<li>MinGW</li>
<li>Clang</li>
<li>GCC/G++</li>
</ul>
<h2 id="binary-launching-runtime-issues">Binary launching runtime issues<a class="headerlink" href="#binary-launching-runtime-issues" title="Permanent link">&para;</a></h2>
<h3 id="relative-resources">Relative resources<a class="headerlink" href="#relative-resources" title="Permanent link">&para;</a></h3>
<p>If your application uses &ldquo;relative resources&rdquo; (e.g. images, etc. packaged
with it external to the binary), you may encounter problems with such
based on the context in which your application is launched.</p>
<p>Perhaps the easiest solution to this may be to &ldquo;force&rdquo; the work directory 
prior to launching the program.  That can be accomplished via a &ldquo;wrapper script&rdquo;
around the binary. See <a href="HighLevel.html#pkgexewrapperscript">pkgExeWrapperScript</a> 
and <a href="LowLevel.html#executablescript">ExecutableScript</a> for help adding this
&ldquo;quick fix&rdquo;.</p>
<p>Here is a better solution&hellip; Rather than depending upon the current working 
directory being set to your&rsquo;s program&rsquo;s location before it is started, you could
acquire the directory path programmatically, and then resolving your 
relative paths to ones which are absolute.  </p>
<p>In Python, you could use a function such as this <code>absPath</code> example.<br />
(Note, the <code>THIS_DIR</code> assignment shown here is valid in both a script and 
binary (i.e. &ldquo;frozen&rdquo;) context.)</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">os</span><span class="o">,</span> <span class="nn">sys</span>

<span class="n">THIS_DIR</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">realpath</span><span class="p">(</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span>

<span class="k">def</span> <span class="nf">absPath</span><span class="p">(</span> <span class="n">relativePath</span> <span class="p">):</span>    
    <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">normpath</span><span class="p">(</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span> <span class="n">THIS_DIR</span><span class="p">,</span> <span class="n">relativePath</span> <span class="p">)</span> <span class="p">)</span>
</code></pre></div>

<p>Unfortunately, in some situations, that preferred approach would take a great deal
of effort to apply . In which case, yet another approach could be taken, which 
resembles the &ldquo;wrapper script&rdquo; concept, but is built into your program itself.
Just set the working directory when the program is launched, for inside of, and then
set it back to what it was upon exit.</p>
<p>Python example:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">os</span><span class="o">,</span> <span class="nn">sys</span>

<span class="n">THIS_DIR</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">realpath</span><span class="p">(</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span>

<span class="n">__INIT_DIR</span> <span class="o">=</span> <span class="kc">None</span>
<span class="k">def</span> <span class="nf">normalizeWorkDir</span><span class="p">()</span> <span class="p">:</span>
    <span class="k">global</span> <span class="n">__INIT_DIR</span>
    <span class="n">__INIT_DIR</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">curdir</span>
    <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span> <span class="n">THIS_DIR</span> <span class="p">)</span>

<span class="k">def</span> <span class="nf">restoreWorkDir</span><span class="p">()</span> <span class="p">:</span>
    <span class="k">if</span> <span class="n">__INIT_DIR</span> <span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span> <span class="n">__INIT_DIR</span> <span class="p">)</span>
</code></pre></div>

<p>Example use of the above functions, to place in your &ldquo;entry point&rdquo;:</p>
<div class="codehilite"><pre><span></span><code><span class="k">if</span> <span class="nv">__name__</span> <span class="o">==</span> <span class="s2">&quot;</span><span class="s">__main__</span><span class="s2">&quot;</span>:
    <span class="nv">normalizeWorkDir</span><span class="ss">()</span>
    <span class="nv">launchApp</span><span class="ss">()</span>
    <span class="nv">restoreWorkDir</span><span class="ss">()</span>
</code></pre></div>

<h3 id="crash-failure-with-no-debugging-info">Crash / failure with no debugging info<a class="headerlink" href="#crash-failure-with-no-debugging-info" title="Permanent link">&para;</a></h3>
<p>If a (gui) PyInstaller built application fails,
and you are seeking debugging info, refer to the 
<a href="Reference.md#testing">Testing</a> section of the 
Reference Manual for more details on viewing such.    </p>
<h2 id="qt-installer-framework-issues">Qt Installer Framework issues<a class="headerlink" href="#qt-installer-framework-issues" title="Permanent link">&para;</a></h2>
<h3 id="setting-qt_ifw_dir">Setting <code>QT_IFW_DIR</code><a class="headerlink" href="#setting-qt_ifw_dir" title="Permanent link">&para;</a></h3>
<p>To use the Qt Installer Framework integration (manually), it is 
recommended to you set the <code>QT_IFW_DIR</code> environmental 
variable on a <em>permanent</em> (non-volatile) basis (so it
doesn&rsquo;t have to set every time you want to use it). This 
method makes your build script portable across platforms and 
on all your project collaborator&rsquo;s machines.  If that proves
to be difficult, however, you may set that within the script. <br />
Refer to the <a href="Reference.md#installers">Installers</a> section of 
the Reference Manual for details. </p>
<p>Setting environmental variables is beyond the scope of this document,
but here some places to start looking for help.  </p>
<p><a href="https://superuser.com/questions/949560/how-do-i-set-system-environment-variables-in-windows-10">Windows variables</a></p>
<p><a href="https://stackoverflow.com/questions/135688/setting-environment-variables-on-os-x">macOS variables</a></p>
<p><a href="https://askubuntu.com/questions/58814/how-do-i-add-environment-variables">Ubuntu variables</a></p>
<h3 id="launch-app-at-end-of-install-failures">Launch App at end of install failures<a class="headerlink" href="#launch-app-at-end-of-install-failures" title="Permanent link">&para;</a></h3>
<p>If the application appears to run in every other context, except
when launched at the end of the Qt installer, a likely
reason is that working directory is incorrect when it is 
executed. This library attempts to set the working
directory for any program to the location where it resides
implicitly.  QtIFW, however, does not currently support setting
the working directory as a &ldquo;RunProgram&rdquo; directive.
A feature request for this was filed with Qt (long ago):</p>
<p><a href="https://bugreports.qt.io/browse/QTIFW-217">https://bugreports.qt.io/browse/QTIFW-217</a></p>
<p>For now, while there are various potential solutions to this, 
the <em>best</em> one is arguably to resolve this directly within your program.<br />
See <a href="relative-resources">Relative resources</a> for more help. </p>
<p>If Qt does not finally resolve this themselves sometime in 
an upcoming IFW release, then distbuilder will provide a built-in
work around.  Note, this is also a known issue on macOS, when launching 
via symbolic links added to Applications or the desktop.  That is NOT
a problem via Windows shortcuts or Linux desktops entries.</p>
<h3 id="windows-8-and-earlier-crash-at-end-of-install">Windows 8 (and earlier?): Crash at end of install<a class="headerlink" href="#windows-8-and-earlier-crash-at-end-of-install" title="Permanent link">&para;</a></h3>
<p>Recent versions of QtIFW have been observed to crash at the 
end of the installation on Windows 8.  This bug has been 
reported to Qt and they appear to be actively patching it.</p>
<p><a href="https://bugreports.qt.io/browse/QTIFW-1248">https://bugreports.qt.io/browse/QTIFW-1248</a></p>
<p>The current work around is to directly launch the installer 
with elevated privileges (i.e as an administrator) on this
version of Windows.</p>
<h3 id="linux-sudo-password-not-accepted">Linux sudo password not accepted<a class="headerlink" href="#linux-sudo-password-not-accepted" title="Permanent link">&para;</a></h3>
<p>It has been observed that sometimes the sudo password is
not accepted by the installer when it prompts for it. The
contexts and details have yet to be narrowed down.</p>
<p>The current work around is to directly launch the installer 
with elevated privileges (i.e as root / sudo) if you encounter
this (inconsistent/odd) behavior.</p>
<h2 id="get-help">Get Help<a class="headerlink" href="#get-help" title="Permanent link">&para;</a></h2>
<p>Refer to <a href="Contribute.html#post-an-issue">Post An Issue</a>.</p>

  <br>
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="ToDo.html" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="ToDo.html" class="btn btn-xs btn-link">
        To-Do List
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="Utility%20Constants.html" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="Utility%20Constants.html" class="btn btn-xs btn-link">
        Utility Constants
      </a>
    </div>
    
  </div>

    <br>
</div>

<footer class="col-md-12 wm-page-content">
  <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a> using <a href="https://github.com/gristlabs/mkdocs-windmill">Windmill</a> theme by Grist Labs.</p>
</footer>

</body>
</html>